% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Support_Analysis_SIVScoring.R
\name{build_rois}
\alias{build_rois}
\title{Build Regions of Interest (ROIs) Around Specified Centers}
\usage{
build_rois(meta, centers, r_mm = 0.05, roi_prefix = "case")
}
\arguments{
\item{meta}{A data frame of per-cell metadata containing spatial coordinates and
any additional cell-level annotations. Must include:
\describe{
  \item{\code{x_slide_mm}}{Numeric x-coordinate (in mm).}
  \item{\code{y_slide_mm}}{Numeric y-coordinate (in mm).}
}}

\item{centers}{A data frame of ROI center coordinates with columns
\code{x_slide_mm} and \code{y_slide_mm}. Each row represents one ROI center.}

\item{r_mm}{Numeric. Radius (in millimeters) defining the circular region around
each center to include cells (default: \code{0.05}).}

\item{roi_prefix}{Character string defining a prefix for ROI identifiers and types
(e.g., \code{"case"} or \code{"control"}; default: \code{"case"}).}
}
\value{
A data frame where each row corresponds to a single cell included in one ROI.
  The output retains all columns from \code{meta} and adds:
  \describe{
    \item{\code{roi_id}}{Unique ROI identifier (e.g., \code{"case_1"}).}
    \item{\code{roi_cx}, \code{roi_cy}}{ROI center coordinates.}
    \item{\code{roi_radius_mm}}{Numeric radius used to define the ROI.}
    \item{\code{roi_type}}{ROI label defined by \code{roi_prefix}.}
  }
}
\description{
Constructs circular regions of interest (ROIs) by selecting all cells within a
specified radius (\code{r_mm}) around given center coordinates. Each ROI is labeled
and returned as a long-format data frame suitable for downstream summarization
and visualization.
}
\details{
This function performs a straightforward per-center Euclidean distance check to
include all cells within a circular region of radius \code{r_mm}. While slower
than \code{\link{build_rois_fast}} for large datasets, it is easier to interpret
and useful for validation or small-scale analyses.

If no cells fall within the ROI for a given center, that ROI is skipped.
An empty data frame is returned if no centers produce valid ROIs.
}
\examples{
meta <- data.frame(
  x_slide_mm = runif(1000, 0, 2),
  y_slide_mm = runif(1000, 0, 2)
)
centers <- data.frame(
  x_slide_mm = c(0.5, 1.5),
  y_slide_mm = c(0.5, 1.5)
)
rois <- build_rois(meta, centers, r_mm = 0.1, roi_prefix = "case")
head(rois)

}
\seealso{
\code{\link{build_rois_fast}} for a faster nearest-neighbor version, and
\code{\link{summarize_rois}} for ROI-level aggregation.
}
