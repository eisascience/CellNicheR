% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Support_Analysis_SIVScoring.R
\name{summarize_rois}
\alias{summarize_rois}
\title{Summarize ROI-Level Cell Composition and SIV Metrics}
\usage{
summarize_rois(
  roi_long,
  celltype_col,
  positive_col = "SIV_Positive",
  plausible_col = "SIV_Plausible",
  score_col = "SIV_UCell"
)
}
\arguments{
\item{roi_long}{A data frame containing all cells assigned to one or more ROIs.
Must include at least the columns:
\describe{
  \item{\code{roi_id}}{Unique ROI identifier.}
  \item{\code{roi_type}}{ROI label (e.g., \code{"case"} or \code{"control"}).}
  \item{\code{SampleID}}{Sample or section identifier.}
  \item{\code{x_slide_mm}, \code{y_slide_mm}}{Optional; per-cell spatial coordinates.}
}
Additional columns specified by the arguments below must also be present.}

\item{celltype_col}{Character string giving the name of the column in \code{roi_long}
that defines cell types or clusters.}

\item{positive_col}{Character string specifying the column indicating SIV-positive
cells (default: \code{"SIV_Positive"}).}

\item{plausible_col}{Character string specifying the column indicating
SIV-plausible (susceptible) cells (default: \code{"SIV_Plausible"}).}

\item{score_col}{Character string specifying the column containing per-cell
SIV activity or infection scores (default: \code{"SIV_UCell"}).}
}
\value{
A data frame with one row per ROI, containing:
  \describe{
    \item{\code{roi_id}, \code{roi_type}, \code{SampleID}}{ROI identifiers.}
    \item{\code{n_cells}}{Number of cells within the ROI.}
    \item{\code{frac_pos}}{Fraction of cells that are SIV-positive.}
    \item{\code{frac_plaus}}{Fraction of cells that are SIV-plausible.}
    \item{\code{mean_score}, \code{median_score}}{Mean and median SIV score per ROI.}
    \item{Cell-type columns}{Additional columns representing the proportion
      of each cell type (from \code{celltype_col}) within the ROI, as wide-format
      fractional values that sum to 1 per ROI.}
  }
}
\description{
Aggregates per-cell metadata within each region of interest (ROI) to produce
ROI-level summaries of cell counts, infection-related fractions, and cell-type
composition. This function serves as the core summarization step in the
\pkg{CellNicheR} spatial ROI analysis pipeline.
}
\details{
The function first computes infection-related summaries for each ROI using
the specified \code{positive_col}, \code{plausible_col}, and \code{score_col}.
It then tabulates per-ROI cell-type proportions and merges these into a single
summary table suitable for downstream visualization or statistical analysis.
}
\examples{
roi_long <- data.frame(
  roi_id = rep(paste0("case_", 1:3), each = 10),
  roi_type = rep("case", 30),
  SampleID = "LN1",
  SIV_Positive = rbinom(30, 1, 0.2),
  SIV_Plausible = rbinom(30, 1, 0.5),
  SIV_UCell = runif(30),
  CellType = sample(c("T.cell", "B.cell", "Macrophage"), 30, TRUE)
)
summarize_rois(roi_long, celltype_col = "CellType")

}
\seealso{
\code{\link{run_roi_pipeline_one}}, \code{\link{build_rois_fast}},
and \code{\link{compute_overlap_stats}} for related ROI processing functions.
}
